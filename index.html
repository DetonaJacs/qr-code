<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de Qr-Code</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#25D366">

  <!-- Para iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="QR WhatsApp">
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
  <link rel="icon" href="./img/logo.ico" type="image/x-icon">
  <link rel="stylesheet" href="./qr.css?v=4.1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>

  <button id="installButton">Instalar App</button>


  <section>
    <div class="row">
      <select class="sizes">
        <option value="100">100x100</option>
        <option value="200">200x200</option>
        <option value="300">300x300</option>
        <option selected value="400">400x400</option>
        <option value="500">500x500</option>
        <option value="600">600x600</option>
        <option value="700">700x700</option>
        <option value="800">800x800</option>
        <option value="900">900x900</option>
        <option value="1000">1000x1000</option>
      </select>
    </div>

    <div class="input-group whatsapp-fields" style="display: none;">
      <div class="input-row">
        <label for="whatsapp-number">NÃºmero WhatsApp (com DDD):</label>
        <input type="text" id="whatsapp-number" placeholder="Ex: 5511999999999">
      </div>
      <div class="input-row">
        <label for="whatsapp-message">Mensagem (opcional):</label>
        <input type="text" id="whatsapp-message" placeholder="Digite sua mensagem">
      </div>
      <button class="btn generate-whatsapp-btn">
        <span>Gerar QR WhatsApp</span>
        <span class="material-symbols-outlined">qr_code</span>
      </button>
    </div>

    <div class="input-group default-fields">
      <input type="text" placeholder="Digite o texto ou URL para o QR Code" class="qr-text">
      <button class="btn toggle-whatsapp-btn">
        <span>Gerar para WhatsApp</span>
        <span class="material-symbols-outlined">chat</span>
      </button>
    </div>

    <div id="qr-code"></div>
    <div class="action-container">
      <a href="#" download="QRCode" class="download btn">
        <span>Download</span>
        <span class="material-symbols-outlined">download</span>
      </a>
      <button class="btn share-btn">
        <span>Compartilhar</span>
        <span class="material-symbols-outlined">share</span>
      </button>
    </div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="./qr.js?v=1.1" defer></script>
  <script>
  // Registrar Service Worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(registration => {
          console.log('ServiceWorker registrado com sucesso:', registration.scope);
        })
        .catch(error => {
          console.log('Falha ao registrar ServiceWorker:', error);
        });
    });
  }
  </script>
</body>
</html>
